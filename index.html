<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Department Timetable (Combined View 2)</title>
    <style>
        :root {
            --border-color: #dee2e6;
            --header-bg: #005a9c;
            --header-text: #ffffff;
            --highlight-bg: #fff3cd;
            --day-border-color: #005a9c;
            --day-header-bg: #e9ecef;
            --class-name-bg: #fdfdfd;
            --class-border: #005a9c;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
            color: #212529;
        }

        .timetable-container {
            max-width: 100%;
            margin: 0 auto;
            overflow-x: auto;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: #343a40;
            margin-bottom: 20px;
        }

        .controls {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 20px;
        }

        .controls label {
            font-weight: 500;
            margin-right: 10px;
            align-self: center;
        }

        .controls select {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 0.9em;
            background-color: #fff;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
        }

        th, td {
            border: 1px solid var(--border-color);
            padding: 4px; /* Reduced padding */
            text-align: center;
            vertical-align: middle;
            min-height: 50px; /* Reduced min-height */
            line-height: 1.25; /* Tighter line-height */
            transition: background-color 0.3s ease;
            font-size: 0.8em; /* Slightly smaller font for better fit */
        }

        /* Style for the subject name */
        td b {
            font-weight: 500;
            display: block; /* Makes it a block element */
            margin-bottom: 0px; /* No margin */
            line-height: 1.2; /* Tight line height */
        }
        
        /* Style for the teacher code */
        td i {
            font-style: normal;
            color: #495057;
            font-size: 0.95em;
            line-height: 1.2; /* Tight line height */
        }

        /* Override for horizontal rule */
        td hr {
            margin: 2px 0; /* Minimal margin */
            border: 0;
            border-top: 1px solid #eee;
        }


        thead th {
            background-color: var(--header-bg);
            color: var(--header-text);
            font-weight: 600;
            font-size: 0.85em;
            padding: 8px 4px; /* Reduced padding */
            vertical-align: middle;
        }
        
        thead th:first-child,
        thead th:nth-child(2) {
            text-align: left;
            padding-left: 8px; /* Reduced padding */
            width: 8%; /* Day */
        }
        thead th:nth-child(2) {
             width: 12%; /* Class */
        }
        
        thead th:not(:first-child):not(:nth-child(2)) {
            width: 16%; /* Period columns */
        }


        tbody tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        /* Day Header Cell (e.g., "Monday") */
        td.day-header {
            font-weight: 600;
            font-size: 1em;
            text-align: left;
            padding-left: 8px; /* Reduced padding */
            background-color: var(--day-header-bg);
            vertical-align: middle;
            border: none;
            border-bottom: 2px solid var(--day-border-color);
            border-top: 2px solid var(--day-border-color);
        }
        
        /* Apply top border to the first cell of the day block */
        tr.day-start td {
             border-top: 2px solid var(--day-border-color);
        }
        /* Apply bottom border to the last cell of the day block */
        tr.day-end td {
             border-bottom: 2px solid var(--day-border-color);
        }
        /* Apply side borders to all cells in the day block */
        tr.day-row td {
            border-left: 2px solid var(--day-border-color);
            border-right: 2px solid var(--day-border-color);
        }
        /* Fix double borders */
        tr.day-row td.day-header {
            border-right: 1px solid var(--border-color);
        }
        tr.day-row:not(.day-start) td {
            border-top: 1px solid var(--border-color);
        }
         tr.day-row:not(.day-end) td {
            border-bottom: 1px solid var(--border-color);
        }
        
        /* Class Name Cell (e.g., "M.Sc S4") */
        td.class-name {
            font-weight: 600;
            text-align: left;
            padding-left: 8px; /* Reduced padding */
            background-color: var(--class-name-bg);
            border-left: 3px solid var(--class-border);
            font-size: 0.85em;
        }
        
        td.empty-cell {
            background-color: #fafafa;
            font-style: italic;
            color: #adb5bd;
        }

        .highlight {
            background-color: var(--highlight-bg) !important;
            font-weight: 500;
        }

        /* Responsive styles for mobile */
        @media (max-width: 768px) {
            body { padding: 5px; }
            .timetable-container { padding: 10px; }
            h1 { font-size: 1.2em; }
            .controls { flex-direction: column; align-items: stretch; }
            .controls label { margin-bottom: 5px; }
            .controls select { width: 100%; }
            
            table, thead, tbody, th, td, tr {
                display: block;
            }
            
            thead tr {
                position: absolute;
                top: -9999px;
                left: -9999px;
            }
            
            tr { 
                border: 1px solid #ccc; 
                margin-bottom: 10px;
                border-radius: 6px;
                overflow: hidden;
            }
            
            /* Reset day block borders for mobile */
             tr.day-start td, tr.day-end td, tr.day-row td {
                border: none;
             }
             tr.day-row:not(:first-child) {
                 margin-top: -1px; /* Stack rows neatly */
             }
             
             tr.day-row.day-start {
                 border-top-left-radius: 0;
                 border-top-right-radius: 0;
             }
             
             tr.day-row.day-end {
                 margin-bottom: 10px; /* Space between day blocks */
             }

            td {
                border: none;
                border-bottom: 1px solid #eee;
                position: relative;
                padding-left: 50%;
                text-align: right;
                display: grid;
                grid-template-columns: 50% 50%;
                align-items: center;
                min-height: 40px;
                line-height: 1.3;
                font-size: 0.9em;
            }
            
            td:before {
                content: attr(data-label);
                position: absolute;
                left: 6px;
                width: 45%;
                padding-right: 10px;
                white-space: nowrap;
                text-align: left;
                font-weight: bold;
                color: #333;
            }
            
            /* Special handling for Day/Class headers */
            td.day-header, td.class-name {
                display: block;
                text-align: center;
                padding-left: 0;
                font-size: 1.1em;
                background-color: var(--day-header-bg);
                border-bottom: 2px solid var(--day-border-color);
            }
            td.class-name {
                 background-color: var(--class-name-bg);
                 border-left: none;
                 border-bottom: 1px solid #eee;
                 text-align: left;
                 padding-left: 10px;
                 font-size: 1em;
            }
            
            tr.day-row {
                border: 1px solid #ccc; 
            }
             tr.day-header-row {
                 border: none;
                 margin-bottom: 0;
             }

            /* Hide day header cell in mobile table rows */
            tr.day-row td:first-child {
                display: none;
            }
            
            /* Adjust content alignment */
             td b, td i, td hr {
                 text-align: right;
                 display: block;
                 margin: 0;
                 padding: 1px 0;
             }
        }

        /* Print styles */
        @media print {
            @page {
                size: A4 landscape;
                margin: 0.5cm;
            }

            body {
                padding: 0;
                margin: 0;
                background-color: #fff;
                -webkit-print-color-adjust: exact; /* For Chrome */
                color-adjust: exact; /* Standard */
            }

            .timetable-container {
                box-shadow: none;
                border-radius: 0;
                padding: 0;
                width: 100%;
                max-width: 100%;
                overflow: visible;
            }
            
            .controls, h1 {
                display: none; /* Hide controls and title when printing */
            }

            table {
                table-layout: fixed;
                width: 100%;
                font-size: 9px; /* Smaller font for A4 */
            }

            th, td {
                border: 1px solid #999; /* Darker border for print */
                padding: 2px; /* Tighter padding for print */
                line-height: 1.2; /* Tighter line height for print */
            }
            
             /* Ensure highlights are printed */
            .highlight {
                background-color: var(--highlight-bg) !important;
            }
            
            /* Ensure day block borders are printed */
            tr.day-start td {
                 border-top: 2px solid var(--day-border-color) !important;
            }
            tr.day-end td {
                 border-bottom: 2px solid var(--day-border-color) !important;
            }
            tr.day-row td {
                border-left: 2px solid var(--day-border-color) !important;
                border-right: 2px solid var(--day-border-color) !important;
            }
            tr.day-row td.day-header {
                border-right: 1px solid #999 !important;
            }
        }
    </style>
</head>
<body>

    <div class="timetable-container">
        <h1>Department Timetable</h1>
        
        <div class="controls">
            <label for="faculty-select">Highlight Faculty:</label>
            <select id="faculty-select">
                <option value="">-- Select Faculty --</option>
                <option value="ARR">Rasmi AR (ARR)</option>
                <option value="SV">Suresh V (SV)</option>
                <option value="SMK">Sajitha Menon K (SMK)</option>
                <option value="LJL">Leeja L (LJL)</option>
                <option value="AA">Alen Alex (AA)</option>
                <option value="RER">Reedhu K (RER)</option>
                <option value="SJ">Sojan Jose (SJ)</option>
            </select>
        </div>

        <table>
            <thead>
                <tr>
                    <th>Day</th>
                    <th>Class</th>
                    <th>Period 1 (9:30-10:30)</th>
                    <th>Period 2 (10:30-11:30)</th>
                    <th>Period 3 (11:30-12:30)</th>
                    <th>Period 4 (1:30-2:30)</th>
                    <th>Period 5 (2:30-3:30)</th>
                </tr>
            </thead>
            <tbody>
                <!-- Monday -->
                <tr class="day-header-row">
                    <td class="day-header" rowspan="6">Monday</td>
                    <td class="class-name day-start day-row">M.Sc S4</td>
                    <td data-label="P1" class="day-start day-row"><b>PG4_ ELECTIVE 1</b><i>ARR</i></td>
                    <td data-label="P2" class="day-start day-row"><b>PG4_PROJECT</b><i>SMK</i></td>
                    <td data-label="P3" class="day-start day-row"><b>PG4_ ELECTIVE 1</b><i>SMK</i></td>
                    <td data-label="P4" class="day-start day-row"><b>PG4_PROJECT</b><i>LJL</i></td>
                    <td data-label="P5" class="day-start day-row"><b>PG4_ELECTIVE 2</b><i>AA</i></td>
                </tr>
                <tr class="day-row">
                    <td class="class-name">M.Sc S2</td>
                    <td data-label="P1"><b>PG2_CO4</b><i>SV</i><hr><b>PG2_CO5</b><i>LJL</i></td>
                    <td data-label="P2"><b>PG2_CO5</b><i>SV</i></td>
                    <td data-label="P3"><b>PG2_CO6</b><i>LJL</i></td>
                    <td data-label="P4"><b>PG2_SEMINAR</b><i>SMK</i></td>
                    <td data-label="P5"><b>PG2_CO4</b><i>ARR</i></td>
                </tr>
                <tr class="day-row">
                    <td class="class-name">B.Sc S6</td>
                    <td data-label="P1"><b>C6_CORE10</b><i>SJ</i></td>
                    <td data-label="P2"><b>C6_CORE11</b><i>RER</i></td>
                    <td data-label="P3"><b>C6_ELECTIVE</b><i>SJ</i><hr><b>C6_CORE11</b><i>RER</i></td>
                    <td data-label="P4"><b>C6_CORE12</b><i>ARR</i></td>
                    <td data-label="P5"><b>C6_ELECTIVE</b><i>SV</i></td>
                </tr>
                <tr class="day-row">
                    <td class="class-name">FYUG S4</td>
                    <td data-label="P1"><b>F4_MAJOR5</b><i>RER</i></td>
                    <td data-label="P2"><b>F4_MAJOR5</b><i>ARR</i></td>
                    <td data-label="P3"><b>F4_MAJOR5</b><i>AA</i></td>
                    <td data-label="P4" class="empty-cell">-</td>
                    <td data-label="P5"><b>F4_MAJOR7</b><i>LJL</i></td>
                </tr>
                <tr class="day-row">
                    <td class="class-name">FYUG S2</td>
                    <td data-label="P1"><b>F2_MAJOR2</b><i>AA</i></td>
                    <td data-label="P2" class="empty-cell">-</td>
                    <td data-label="P3" class="empty-cell">-</td>
                    <td data-label="P4" class="empty-cell">-</td>
                    <td data-label="P5"><b>F2_MDC2</b><i>RER</i></td>
                </tr>
                <tr class="day-end day-row">
                    <td class="class-name">Minor S2-2-Zool</td>
                    <td data-label="P1" class="empty-cell">-</td>
                    <td data-label="P2"><b>F2_MINOR2</b><i>SJ</i></td>
                    <td data-label="P3"><b>F2_MINOR2</b><i>SV</i></td>
                    <td data-label="P4" class="empty-cell">-</td>
                    <td data-label="P5" class="empty-cell">-</td>
                </tr>

                <!-- Tuesday -->
                <tr class="day-header-row">
                    <td class="day-header" rowspan="6">Tuesday</td>
                    <td class="class-name day-start day-row">M.Sc S4</td>
                    <td data-label="P1" class="day-start day-row"><b>PG4_ ELECTIVE 1</b><i>SJ</i></td>
                    <td data-label="P2" class="day-start day-row"><b>PG4_PROJECT</b><i>RER</i></td>
                    <td data-label="P3" class="day-start day-row"><b>PG4_ ELECTIVE 1</b><i>RER</i></td>
                    <td data-label="P4" class="day-start day-row"><b>PG4_ELECTIVE 2</b><i>LJL</i></td>
                    <td data-label="P5" class="day-start day-row"><b>PG4_ ELECTIVE 1</b><i>SMK</i></td>
                </tr>
                <tr class="day-row">
                    <td class="class-name">M.Sc S2</td>
                    <td data-label="P1"><b>PG2_CO6</b><i>SV</i></td>
                    <td data-label="P2"><b>PG2_CO4</b><i>SMK</i></td>
                    <td data-label="P3"><b>PG2_CO6</b><i>SJ</i></td>
                    <td data-label="P4"><b>PG2_CO5</b><i>AA</i><hr><b>PG2_CO6</b><i>RER</i></td>
                    <td data-label="P5"><b>PG2_CO4</b><i>ARR</i></td>
                </tr>
                <tr class="day-row">
                    <td class="class-name">B.Sc S6</td>
                    <td data-label="P1"><b>C6_CORE11</b><i>AA</i></td>
                    <td data-label="P2"><b>C6_CORE10</b><i>LJL</i></td>
                    <td data-label="P3"><b>C6_CORE12</b><i>SMK</i></td>
                    <td data-label="P4"><b>C6_CORE12</b><i>ARR</i></td>
                    <td data-label="P5"><b>C6_CORE13</b><i>RER</i></td>
                </tr>
                <tr class="day-row">
                    <td class="class-name">FYUG S4</td>
                    <td data-label="P1" class="empty-cell">-</td>
                    <td data-label="P2"><b>F4_MAJOR6</b><i>SMK</i></td>
                    <td data-label="P3"><b>F4_MAJOR6</b><i>LJL</i></td>
                    <td data-label="P4" class="empty-cell">-</td>
                    <td data-label="P5"><b>F4_MAJOR7</b><i>SJ</i></td>
                </tr>
                <tr class="day-row">
                    <td class="class-name">FYUG S2</td>
                    <td data-label="P1" class="empty-cell">-</td>
                    <td data-label="P2"><b>F2_MDC2</b><i>SV</i></td>
                    <td data-label="P3" class="empty-cell">-</td>
                    <td data-label="P4" class="empty-cell">-</td>
                    <td data-label="P5"><b>F2_MAJOR2</b><i>AA</i></td>
                </tr>
                <tr class="day-end day-row">
                    <td class="class-name">Minor S2-2-Zool</td>
                    <td data-label="P1" class="empty-cell">-</td>
                    <td data-label="P2" class="empty-cell">-</td>
                    <td data-label="P3" class="empty-cell">-</td>
                    <td data-label="P4"><b>F2_MINOR2</b><i>SV</i><hr><b>F2_MINOR2</b><i>SJ</i></td>
                    <td data-label="P5" class="empty-cell">-</td>
                </tr>

                <!-- Wednesday -->
                <tr class="day-header-row">
                    <td class="day-header" rowspan="6">Wednesday</td>
                    <td class="class-name day-start day-row">M.Sc S4</td>
                    <td data-label="P1" class="day-start day-row"><b>PG4_ELECTIVE 2</b><i>AA</i></td>
                    <td data-label="P2" class="day-start day-row"><b>PG4_PROJECT</b><i>ARR</i></td>
                    <td data-label="P3"><b>PG4_ELECTIVE 2</b><i>RER</i><hr><b>PG4_ELECTIVE 2</b><i>SV</i></td>
                    <td data-label="P4" class="empty-cell">-</td>
                    <td data-label="P5" class="day-start day-row"><b>PG4_PROJECT</b><i>ARR</i></td>
                </tr>
                <tr class="day-row">
                    <td class="class-name">M.Sc S2</td>
                    <td data-label="P1"><b>PG2_CO4</b><i>SMK</i></td>
                    <td data-label="P2"><b>PG2_CO6</b><i>LJL</i></td>
                    <td data-label="P3"><b>PG2_CO4</b><i>SMK</i></td>
                    <td data-label="P4"><b>PG2_CO5</b><i>AA</i></td>
                    <td data-label="P5"><b>PG2_CO6</b><i>RER</i></td>
                </tr>
                <tr class="day-row">
                    <td class="class-name">B.Sc S6</td>
                    <td data-label="P1"><b>C6_CORE10</b><i>LJL</i></td>
                    <td data-label="P2"><b>C6_CORE11</b><i>RER</i></td>
                    <td data-label="P3"><b>C6_ELECTIVE</b><i>AA</i><hr><b>C6_CORE11</b><i>AA</i></td>
                    <td data-label="P4"><b>C6_CORE13</b><i>SJ</i></td>
                    <td data-label="P5"><b>C6_ELECTIVE</b><i>SV</i></td>
                </tr>
                <tr class="day-row">
                    <td class="class-name">FYUG S4</td>
                    <td data-label="P1" class="empty-cell">-</td>
                    <td data-label="P2" class="empty-cell">-</td>
                    <td data-label="P3"><b>F4_MAJOR7</b><i>SJ</i></td>
                    <td data-label="P4" class="empty-cell">-</td>
                    <td data-label="P5" class="empty-cell">-</td>
                </tr>
                <tr class="day-row">
                    <td class="class-name">FYUG S2</td>
                    <td data-label="P1"><b>F2_MAJOR2</b><i>ARR</i></td>
                    <td data-label="P2" class="empty-cell">-</td>
                    <td data-label="P3" class="empty-cell">-</td>
                    <td data-label="P4"><b>F2_MAJOR2</b><i>SMK</i></td>
                    <td data-label="P5"><b>F2_MAJOR2</b><i>SMK</i></td>
                </tr>
                <tr class="day-end day-row">
                    <td class="class-name">Minor S2-2-Zool</td>
                    <td data-label="P1" class="empty-cell">-</td>
                    <td data-label="P2" class="empty-cell">-</td>
                    <td data-label="P3" class="empty-cell">-</td>
                    <td data-label="P4" class="empty-cell">-</td>
                    <td data-label="P5" class="empty-cell">-</td>
                </tr>
                
                <!-- Thursday -->
                <tr class="day-header-row">
                    <td class="day-header" rowspan="6">Thursday</td>
                    <td class="class-name day-start day-row">M.Sc S4</td>
                    <td data-label="P1" class="day-start day-row"><b>PG4_PROJECT</b><i>SV</i></td>
                    <td data-label="P2" class="day-start day-row"><b>PG4_ ELECTIVE 1</b><i>ARR</i></td>
                    <td data-label="P3" class="day-start day-row"><b>PG4_ELECTIVE 2</b><i>AA</i></td>
                    <td data-label="P4" class="day-start day-row"><b>PG4_PROJECT</b><i>AA</i></td>
                    <td data-label="P5" class="day-start day-row"><b>PG4_ ELECTIVE 1</b><i>RER</i></td>
                </tr>
                <tr class="day-row">
                    <td class="class-name">M.Sc S2</td>
                    <td data-label="P1"><b>PG2_CO5</b><i>LJL</i></td>
                    <td data-label="P2"><b>PG2_CO6</b><i>AA</i></td>
                    <td data-label="P3"><b>PG2_CO5</b><i>SJ</i></td>
                    <td data-label="P4"><b>PG2_CO5</b><i>SJ</i></td>
                    <td data-label="P5"><b>PG2_CO4</b><i>ARR</i></td>
                </tr>
                <tr class="day-row">
                    <td class="class-name">B.Sc S6</td>
                    <td data-label="P1"><b>C6_CORE12</b><i>ARR</i></td>
                    <td data-label="P2"><b>C6_CORE10</b><i>LJL</i></td>
                    <td data-label="P3"><b>C6_CORE12</b><i>SMK</i></td>
                    <td data-label="P4"><b>C6_CORE13</b><i>SV</i></td>
                    <td data-label="P5"><b>C6_ELECTIVE</b><i>SJ</i></td>
                </tr>
                <tr class="day-row">
                    <td class="class-name">FYUG S4</td>
                    <td data-label="P1"><b>F4_MAJOR5</b><i>RER</i></td>
                    <td data-label="P2"><b>F4_MAJOR6</b><i>SV</i></td>
                    <td data-label="P3" class="empty-cell">-</td>
                    <td data-label="P4" class="empty-cell">-</td>
                    <td data-label="P5"><b>F4_MAJOR7</b><i>LJL</i></td>
                </tr>
                <tr class="day-row">
                    <td class="class-name">FYUG S2</td>
                    <td data-label="P1" class="empty-cell">-</td>
                    <td data-label="P2" class="empty-cell">-</td>
                    <td data-label="P3" class="empty-cell">-</td>
                    <td data-label="P4" class="empty-cell">-</td>
                    <td data-label="P5" class="empty-cell">-</td>
                </tr>
                <tr class="day-end day-row">
                    <td class="class-name">Minor S2-2-Zool</td>
                    <td data-label="P1" class="empty-cell">-</td>
                    <td data-label="P2" class="empty-cell">-</td>
                    <td data-label="P3" class="empty-cell">-</td>
                    <td data-label="P4" class="empty-cell">-</td>
                    <td data-label="P5" class="empty-cell">-</td>
                </tr>
                
                <!-- Friday -->
                <tr class="day-header-row">
                    <td class="day-header" rowspan="6">Friday</td>
                    <td class="class-name day-start day-row">M.Sc S4</td>
                    <td data-label="P1" class="day-start day-row"><b>PG4_ ELECTIVE 1</b><i>ARR</i></td>
                    <td data-label="P2" class="day-start day-row"><b>PG4_ELECTIVE 2</b><i>RER</i></td>
                    <td data-label="P3" class="day-start day-row"><b>PG4_ELECTIVE 2</b><i>SMK</i></td>
                    <td data-label="P4" class="day-start day-row"><b>PG4_SEMINAR</b><i>ARR</i></td>
                    <td data-label="P5" class="day-start day-row"><b>PG4_PROJECT</b><i>SJ</i></td>
                </tr>
                <tr class="day-row">
                    <td class="class-name">M.Sc S2</td>
                    <td data-label="P1"><b>PG2_CO6</b><i>AA</i></td>
                    <td data-label="P2"><b>PG2_CO5</b><i>SJ</i><hr><b>PG2_CO4</b><i>SMK</i></td>
                    <td data-label="P3"><b>PG2_CO5</b><i>RER</i></td>
                    <td data-label="P4"><b>PG2_CO4</b><i>SV</i></td>
                    <td data-label="P5"><b>PG2_CO5</b><i>LJL</i></td>
                </tr>
                <tr class="day-row">
                    <td class="class-name">B.Sc S6</td>
                    <td data-label="P1"><b>C6_CORE11</b><i>RER</i></td>
                    <td data-label="P2"><b>C6_CORE10</b><i>LJL</i></td>
                    <td data-label="P3"><b>C6_CORE13</b><i>SV</i></td>
                    <td data-label="P4"><b>C6_ELECTIVE</b><i>AA</i></td>
                    <td data-label="P5"><b>C6_CORE13</b><i>SMK</i></td>
                </tr>
                <tr class="day-row">
                    <td class="class-name">FYUG S4</td>
                    <td data-label="P1"><b>F4_MAJOR6</b><i>SJ</i></td>
                    <td data-label="P2"><b>F4_MAJOR5</b><i>ARR</i></td>
                    <td data-label="P3" class="empty-cell">-</td>
                    <td data-label="P4"><b>F4_MAJOR6</b><i>LJL</i></td>
                    <td data-label="P5"><b>F4_MAJOR7</b><i>AA</i></td>
                </tr>
                <tr class="day-row">
                    <td class="class-name">FYUG S2</td>
                    <td data-label="P1"><b>F2_MDC2</b><i>SMK</i></td>
                    <td data-label="P2" class="empty-cell">-</td>
                    <td data-label="P3" class="empty-cell">-</td>
                    <td data-label="P4" class="empty-cell">-</td>
                    <td data-label="P5" class="empty-cell">-</td>
                </tr>
                <tr class="day-end day-row">
                    <td class="class-name">Minor S2-2-Zool</td>
                    <td data-label="P1" class="empty-cell">-</td>
                    <td data-label="P2"><b>F2_MINOR2</b><i>SV</i></td>
                    <td data-label="P3"><b>F2_MINOR2</b><i>SJ</i></td>
                    <td data-label="P4" class="empty-cell">-</td>
                    <td data-label="P5" class="empty-cell">-</td>
                </tr>
            </tbody>
        </table>
    </div>

    <script>
        document.getElementById('faculty-select').addEventListener('change', function() {
            const selectedFaculty = this.value;
            
            // 1. Clear all previous highlights
            const allCells = document.querySelectorAll('tbody td');
            allCells.forEach(cell => {
                cell.classList.remove('highlight');
            });

            if (selectedFaculty) {
                // 2. Find and highlight new cells
                allCells.forEach(cell => {
                    // Create a regex to find the faculty code.
                    // It looks for the code bounded by:
                    // (a tag ending '>', '</i>', or whitespace) + (FACULTY_CODE) + (whitespace, a tag starting '<', or end of string)
                    // This correctly finds "ARR" in "<i>ARR</i>" and "SV" in "<i>SV</i><hr>"
                    const regex = new RegExp('(>|\\s)' + selectedFaculty + '(\\s|<|$)', 'i');
                    
                    // We check innerHTML because it contains the teacher code, e.g., <i>ARR</i>
                    if (regex.test(cell.innerHTML)) {
                        cell.classList.add('highlight');
                    }
                });
            }
        });

        // Add data-labels for mobile view
        document.addEventListener('DOMContentLoaded', () => {
            const table = document.querySelector('table');
            const headers = [];
            table.querySelectorAll('thead th').forEach((th, index) => {
                if (index > 1) { // Skip Day and Class
                    headers.push(th.textContent.split('(')[0].trim()); // Get "Period 1", "Period 2", etc.
                }
            });

            table.querySelectorAll('tbody tr').forEach(tr => {
                 if (!tr.classList.contains('day-header-row')) {
                    tr.querySelectorAll('td').forEach((td, index) => {
                         if (index > 1) { // Skip Class (Day is hidden)
                             td.setAttribute('data-label', headers[index - 2]);
                         }
                    });
                }
            });
        });

    </script>

</body>
</html>
